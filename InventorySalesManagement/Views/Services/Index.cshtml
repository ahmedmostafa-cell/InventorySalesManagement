
@{
    ViewData["Title"] = "كل الخدمات  ";
    Layout = "~/Views/Shared/_MainLayout.cshtml";
    var error = (TempData["Error"] != null) ? TempData["Error"] : null;
    var success = (TempData["Success"] != null) ? TempData["Success"] : null;
}
<div class="row">
    <div class="col-md-12 col-lg-12">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">الخدمات </h3>
                @if (error != null)
                {
                    <div style="text-align: center;" class="alert alert-danger" role="alert">
                        @error
                    </div>
                }
                @if (success != null)
                {
                    <div style="text-align: center;" class="alert alert-success" role="alert">
                        @success
                    </div>
                }
            </div>
            <div class="table-responsive" style="padding: 1.5rem; overflow-x: inherit;">
                <table class="table table-striped table-hover" id="servicesTable">
                    <thead>
                        <tr>
                            <th>اسم الخدمة</th>
                            <th>القسم الرئيسي</th>
                            <th>الكمية</th>
                            <th>نوع المنتج</th>
                            <th>التحكم</th>
                        </tr>
                    </thead>
                </table>


            </div>
        </div>
    </div>
</div>


@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
        <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/dataTables.bootstrap5.min.css" />
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/1.13.4/js/dataTables.bootstrap5.min.js"></script>

        <script>
            $(document).ready(function () {
                $('#servicesTable').DataTable({
                    "processing": true,
                    "serverSide": false,
                    "ajax": {
                        "url": "/Services/GetServices",
                        "type": "GET",
                        "datatype": "json"
                    },
                    "columns": [
                        { "data": "titleAr" },
                        { "data": "mainSection" },
                        { "data": "qty" },
                        { "data": "productType" },
                        {
                            "data": "id",
                            "render": function (data, type, row) {
                                return `
                                            <div class="item-action dropdown">
                                                <a href="javascript:void(0)" data-bs-toggle="dropdown" class="icon">
                                                    <i class="fe fe-more-vertical fs-20 text-dark"></i>
                                                </a>
                                                <div class="dropdown-menu dropdown-menu-end">
                                                    <a href="/Services/Edit/${data}" class="dropdown-item btn btn-warning">تعديل</a>
                                                    <a href="/Services/Details/${data}" class="dropdown-item btn btn-info">تفاصيل</a>
                                                    <a href="/Services/Delete/${data}" class="btn btn-danger dropdown-item" onclick="return confirm('هل أنت متأكد من الحذف ؟');">حذف</a>
                                                </div>
                                            </div>`;
                            }
                        }
                    ],
                    "language": {
                        "search": "البحث",
                        "lengthMenu": "عرض _MENU_ سجل لكل صفحة",
                        "zeroRecords": "لا توجد نتائج مطابقة",
                        "info": "عرض _START_ إلى _END_ من _TOTAL_ سجلات",
                        "infoEmpty": "لا توجد بيانات متاحة",
                        "infoFiltered": "(تصفية من إجمالي _MAX_ سجلات)",
                        "paginate": {
                            "first": "الأول",
                            "last": "الأخير",
                            "next": "التالي",
                            "previous": "السابق"
                        }
                    }
                });
            });
        </script>

    }


}

